{% include '_header.html' -%}
{% import 'Helpers/_helpers.html' as hh -%}

{{ hh.css("/static/controls/histogram.css") }}
{{ hh.css("/static/controls/range_slider.css") }}
{{ hh.css("/static/controls/heatmap.css") }}

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript">
  var GlobalParsedQuery = {{ globalParsedQuery }};
  var TISSUE_MAP = {{ tissueMap }};

  function browserButtonClick(name, accession){

    var half_window = 7500;
    var arr = window.location.href.split("/");
    var host = arr[0] + "//" + arr[2];
    var data = JSON.stringify({"re" : accession,
                               "halfWindow" : half_window,
                               "host" : host});
    console.log("name", name);
    switch (name) {
    case "UCSC":
        $.ajax({
            type: "POST",
            url: "/ucsc_trackhub_url",
            data: data,
            dataType: "json",
            contentType : "application/json",
            success: (response) => {
                if ("err" in response) {
                    $("#errMsg").text(response["err"]);
                    $("#errBox").show()
                    return true;
                }
		//console.log(response["trackhubUrl"]);
	        window.open(response["url"], '_blank');
            },
	    error: (a, b, c) => {
		console.log(a);
	    }
        });
	break;
    }

};


</script>
<div id="root"></div>

{% include '_footer.html' -%}
